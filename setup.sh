#!/bin/bash

C1="EFI-Clover-Series-9.zip"
C2="EFI-Clover-Series-100-200.zip"
C3="EFI-Clover-Series-300-400.zip"

OC1="EFI-OpenCore-Series-9.zip"
OC2="EFI-OpenCore-Series-100-200.zip"
OC3="EFI-OpenCore-Series-300-400.zip"
OC4="EFI-OpenCore-Series-500.zip"

CF1="Series-9"
CF2="Series-100"
CF3="Series-200"
CF4="Series-300"
CF5="Series-400"

OCF1="Series-9"
OCF2="Series-100"
OCF3="Series-200"
OCF4="Series-300"
OCF5="Series-400"
OCF6="Series-500"

rm -rf "Clover-DSDT"
rm -rf "Clover-EFI"
rm -rf "Clover"
rm -rf "Drivers"
rm -rf "OpenCore-EFI"
rm -rf "OpenCore"
rm -rf "Temp"
rm -rf "Tools"
rm -f  "README.md"

mkdir -p "Clover/$CF1"
mkdir -p "Clover/$CF2"
mkdir -p "Clover/$CF3"
mkdir -p "Clover/$CF4"
mkdir -p "Clover/$CF5"
mkdir -p "OpenCore/$OCF1"
mkdir -p "OpenCore/$OCF2"
mkdir -p "OpenCore/$OCF3"
mkdir -p "OpenCore/$OCF4"
mkdir -p "OpenCore/$OCF5"
mkdir -p "OpenCore/$OCF6"
mkdir -p "Temp/Clover-$CF1"
mkdir -p "Temp/Clover-$CF2"
mkdir -p "Temp/Clover-$CF3"
mkdir -p "Temp/Clover-$CF4"
mkdir -p "Temp/Clover-$CF5"
mkdir -p "Temp/OpenCore-$OCF1"
mkdir -p "Temp/OpenCore-$OCF2"
mkdir -p "Temp/OpenCore-$OCF3"
mkdir -p "Temp/OpenCore-$OCF4"
mkdir -p "Temp/OpenCore-$OCF5"
mkdir -p "Temp/OpenCore-$OCF6"
mkdir -p "Tools"

wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Clover-EFI/$C1"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Clover-EFI/$C2"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Clover-EFI/$C3"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Clover-EFI/Theme-Clovy.zip"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Drivers/HfsPlus.efi"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/OpenCore-EFI/$OC1"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/OpenCore-EFI/$OC2"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/OpenCore-EFI/$OC3"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/OpenCore-EFI/$OC4"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Tools/AppCleaner.zip"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Tools/Clover-Configurator.zip"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Tools/OpenCore-Configurator.zip"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Tools/PlistEditPro.zip"
wget -q -P "Temp/" "https://github.com/CrazyTeeka/MacUSB/raw/master/Tools/RunMe.zip"

unzip -o -qq "Temp/$C1"             -d "Temp/Clover-$CF1/"
unzip -o -qq "Temp/$C2"             -d "Temp/Clover-$CF2/"
unzip -o -qq "Temp/$C2"             -d "Temp/Clover-$CF3/"
unzip -o -qq "Temp/$C3"             -d "Temp/Clover-$CF4/"
unzip -o -qq "Temp/$C3"             -d "Temp/Clover-$CF5/"
unzip -o -qq "Temp/$OC1"            -d "Temp/OpenCore-$OCF1/"
unzip -o -qq "Temp/$OC2"            -d "Temp/OpenCore-$OCF2/"
unzip -o -qq "Temp/$OC2"            -d "Temp/OpenCore-$OCF3/"
unzip -o -qq "Temp/$OC3"            -d "Temp/OpenCore-$OCF4/"
unzip -o -qq "Temp/$OC3"            -d "Temp/OpenCore-$OCF5/"
unzip -o -qq "Temp/$OC4"            -d "Temp/OpenCore-$OCF6/"
unzip -o -qq "Temp/Theme-Clovy.zip" -d "Temp/"

cp -rf "Temp/Clover-$CF1/EFI"           "Clover/$CF1/"
cp -rf "Temp/Clover-$CF2/EFI"           "Clover/$CF2/"
cp -rf "Temp/Clover-$CF3/EFI"           "Clover/$CF3/"
cp -rf "Temp/Clover-$CF4/EFI"           "Clover/$CF4/"
cp -rf "Temp/Clover-$CF5/EFI"           "Clover/$CF5/"
cp -rf "Temp/Clovy"                     "Clover/$CF1/EFI/CLOVER/themes/"
cp -rf "Temp/OpenCore-$OCF1/EFI"        "OpenCore/$OCF1/"
cp -rf "Temp/OpenCore-$OCF2/EFI"        "OpenCore/$OCF2/"
cp -rf "Temp/OpenCore-$OCF3/EFI"        "OpenCore/$OCF3/"
cp -rf "Temp/OpenCore-$OCF4/EFI"        "OpenCore/$OCF4/"
cp -rf "Temp/OpenCore-$OCF5/EFI"        "OpenCore/$OCF5/"
cp -rf "Temp/OpenCore-$OCF6/EFI"        "OpenCore/$OCF6/"
cp -f  "Temp/HfsPlus.efi"               "Clover/"
cp -f  "Temp/HfsPlus.efi"               "OpenCore/"
cp -f  "Temp/AppCleaner.zip"            "Tools/"
cp -f  "Temp/Clover-Configurator.zip"   "Tools/"
cp -f  "Temp/OpenCore-Configurator.zip" "Tools/"
cp -f  "Temp/PlistEditPro.zip"          "Tools/"
cp -f  "Temp/RunMe.zip"                 "Tools/"

rm -f "OpenCore/$OCF1/EFI/OC/Drivers/OpenHfsPlus.efi"
rm -f "OpenCore/$OCF2/EFI/OC/Drivers/OpenHfsPlus.efi"
rm -f "OpenCore/$OCF3/EFI/OC/Drivers/OpenHfsPlus.efi"
rm -f "OpenCore/$OCF4/EFI/OC/Drivers/OpenHfsPlus.efi"
rm -f "OpenCore/$OCF5/EFI/OC/Drivers/OpenHfsPlus.efi"
rm -f "OpenCore/$OCF6/EFI/OC/Drivers/OpenHfsPlus.efi"

cp -f "OpenCore/HfsPlus.efi" "OpenCore/$OCF1/EFI/OC/Drivers/HfsPlus.efi"
cp -f "OpenCore/HfsPlus.efi" "OpenCore/$OCF2/EFI/OC/Drivers/HfsPlus.efi"
cp -f "OpenCore/HfsPlus.efi" "OpenCore/$OCF3/EFI/OC/Drivers/HfsPlus.efi"
cp -f "OpenCore/HfsPlus.efi" "OpenCore/$OCF4/EFI/OC/Drivers/HfsPlus.efi"
cp -f "OpenCore/HfsPlus.efi" "OpenCore/$OCF5/EFI/OC/Drivers/HfsPlus.efi"
cp -f "OpenCore/HfsPlus.efi" "OpenCore/$OCF6/EFI/OC/Drivers/HfsPlus.efi"

sed -i '11s/<string>Full Olarila Solution<\/string>/<string>DSDT<\/string>/g'                        "OpenCore/$OCF1/EFI/OC/config.plist"
sed -i '11s/<string>Real Full Solution<\/string>/<string>DSDT<\/string>/g'                           "OpenCore/$OCF2/EFI/OC/config.plist"
sed -i '11s/<string>Real Full Solution<\/string>/<string>DSDT<\/string>/g'                           "OpenCore/$OCF3/EFI/OC/config.plist"
sed -i '11s/<string>Real Full Solution<\/string>/<string>DSDT<\/string>/g'                           "OpenCore/$OCF4/EFI/OC/config.plist"
sed -i '11s/<string>Real Full Solution<\/string>/<string>DSDT<\/string>/g'                           "OpenCore/$OCF5/EFI/OC/config.plist"
sed -i '11s/<string>Real Full Solution<\/string>/<string>DSDT<\/string>/g'                           "OpenCore/$OCF6/EFI/OC/config.plist"
sed -i '19s/<string><\/string>/<string>SSDT Device EC<\/string>/g'                                   "OpenCore/$OCF1/EFI/OC/config.plist"
sed -i '36s/<string>RTC _STA<\/string>/<string>RTC<\/string>/g'                                      "OpenCore/$OCF1/EFI/OC/config.plist"
sed -i '44s/<string>Fix RTC _STA bug<\/string>/<string>RTC<\/string>/g'                              "OpenCore/$OCF2/EFI/OC/config.plist"
sed -i '44s/<string>Fix RTC _STA bug<\/string>/<string>RTC<\/string>/g'                              "OpenCore/$OCF3/EFI/OC/config.plist"
sed -i '44s/<string>Fix RTC _STA bug<\/string>/<string>RTC<\/string>/g'                              "OpenCore/$OCF4/EFI/OC/config.plist"
sed -i '44s/<string>Fix RTC _STA bug<\/string>/<string>RTC<\/string>/g'                              "OpenCore/$OCF5/EFI/OC/config.plist"
sed -i '44s/<string>Fix RTC _STA bug<\/string>/<string>RTC<\/string>/g'                              "OpenCore/$OCF6/EFI/OC/config.plist"
sed -i '836s/<string>NvmExpressDxe.efi<\/string>/<string>HfsPlus.efi<\/string>/g'                    "OpenCore/$OCF2/EFI/OC/config.plist"
sed -i '837s/<string>OpenCanopy.efi<\/string>/<string>NvmExpressDxe.efi<\/string>/g'                 "OpenCore/$OCF2/EFI/OC/config.plist"
sed -i '838s/<string>OpenHfsPlus.efi<\/string>/<string>OpenCanopy.efi<\/string>/g'                   "OpenCore/$OCF2/EFI/OC/config.plist"
sed -i '839s/<string>OpenRuntime.efi<\/string>/<string>OpenRuntime.efi<\/string>/g'                  "OpenCore/$OCF2/EFI/OC/config.plist"
sed -i '836s/<string>NvmExpressDxe.efi<\/string>/<string>HfsPlus.efi<\/string>/g'                    "OpenCore/$OCF3/EFI/OC/config.plist"
sed -i '837s/<string>OpenCanopy.efi<\/string>/<string>NvmExpressDxe.efi<\/string>/g'                 "OpenCore/$OCF3/EFI/OC/config.plist"
sed -i '838s/<string>OpenHfsPlus.efi<\/string>/<string>OpenCanopy.efi<\/string>/g'                   "OpenCore/$OCF3/EFI/OC/config.plist"
sed -i '839s/<string>OpenRuntime.efi<\/string>/<string>OpenRuntime.efi<\/string>/g'                  "OpenCore/$OCF3/EFI/OC/config.plist"
sed -i '836s/<string>NvmExpressDxe.efi<\/string>/<string>HfsPlus.efi<\/string>/g'                    "OpenCore/$OCF4/EFI/OC/config.plist"
sed -i '837s/<string>OpenCanopy.efi<\/string>/<string>NvmExpressDxe.efi<\/string>/g'                 "OpenCore/$OCF4/EFI/OC/config.plist"
sed -i '838s/<string>OpenHfsPlus.efi<\/string>/<string>OpenCanopy.efi<\/string>/g'                   "OpenCore/$OCF4/EFI/OC/config.plist"
sed -i '839s/<string>OpenRuntime.efi<\/string>/<string>OpenRuntime.efi<\/string>/g'                  "OpenCore/$OCF4/EFI/OC/config.plist"
sed -i '836s/<string>NvmExpressDxe.efi<\/string>/<string>HfsPlus.efi<\/string>/g'                    "OpenCore/$OCF5/EFI/OC/config.plist"
sed -i '837s/<string>OpenCanopy.efi<\/string>/<string>NvmExpressDxe.efi<\/string>/g'                 "OpenCore/$OCF5/EFI/OC/config.plist"
sed -i '838s/<string>OpenHfsPlus.efi<\/string>/<string>OpenCanopy.efi<\/string>/g'                   "OpenCore/$OCF5/EFI/OC/config.plist"
sed -i '839s/<string>OpenRuntime.efi<\/string>/<string>OpenRuntime.efi<\/string>/g'                  "OpenCore/$OCF5/EFI/OC/config.plist"
sed -i '836s/<string>NvmExpressDxe.efi<\/string>/<string>HfsPlus.efi<\/string>/g'                    "OpenCore/$OCF6/EFI/OC/config.plist"
sed -i '837s/<string>OpenCanopy.efi<\/string>/<string>NvmExpressDxe.efi<\/string>/g'                 "OpenCore/$OCF6/EFI/OC/config.plist"
sed -i '838s/<string>OpenHfsPlus.efi<\/string>/<string>OpenCanopy.efi<\/string>/g'                   "OpenCore/$OCF6/EFI/OC/config.plist"
sed -i '839s/<string>OpenRuntime.efi<\/string>/<string>OpenRuntime.efi<\/string>/g'                  "OpenCore/$OCF6/EFI/OC/config.plist"
sed -i '27s/<string>SSDT ThundetBolt HotPlug<\/string>/<string>SSDT ThunderBolt HotPlug<\/string>/g' "OpenCore/$OCF2/EFI/OC/config.plist"
sed -i '27s/<string>SSDT ThundetBolt HotPlug<\/string>/<string>SSDT ThunderBolt HotPlug<\/string>/g' "OpenCore/$OCF3/EFI/OC/config.plist"
sed -i '27s/<string>SSDT ThundetBolt HotPlug<\/string>/<string>SSDT ThunderBolt HotPlug<\/string>/g' "OpenCore/$OCF4/EFI/OC/config.plist"
sed -i '27s/<string>SSDT ThundetBolt HotPlug<\/string>/<string>SSDT ThunderBolt HotPlug<\/string>/g' "OpenCore/$OCF5/EFI/OC/config.plist"
sed -i '27s/<string>SSDT ThundetBolt HotPlug<\/string>/<string>SSDT ThunderBolt HotPlug<\/string>/g' "OpenCore/$OCF6/EFI/OC/config.plist"

rm -rf "Temp"
